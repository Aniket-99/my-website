<!DOCTYPE html>
<html>
<head>
	<title>Ajax-1 </title>
</head>
<body>

	<button id="button">Get Text</button>
	<p id="text"></p>
	<script type="text/javascript">
		
		document.getElementById('button').addEventListener('click', loadText);

		function loadText(){
			var xhr = new XMLHttpRequest();
			xhr.open('GET','sample.txt',true);

			console.log('Readystate: ',xhr.readyState);

			xhr.onprogress = function () {
				console.log('Readystate: ',xhr.readyState);
			}

			xhr.onload = function(){
				if (this.status == 200) {
					console.log(this.responseText);

					document.getElementById("text").innerHTML = this.responseText;
				}
				else if(this.status == 404){
					document.getElementById("text").innerHTML = 'Not found';
				}
			}

			xhr.onerror = function() {
				console.log('Request error');
			}

			// xhr.onreadystatechange = function() { // this.readyState is compulsory to be 4 in onreadystatechange
			// 	if (this.readyState == 4 && this.status == 200) {
			// 		console.log(this.responseText);
			// 	}
			// }
			xhr.send();
		}

	</script>

</body>
</html>